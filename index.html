 <!DOCTYPE html>
<html manifest="manifest.appcache">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, height=device-height"/>
		<meta http-equiv="cache-control" content="max-age=0" />
		<meta http-equiv="cache-control" content="no-cache" />
		<meta http-equiv="expires" content="0" />
		<meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
		<meta http-equiv="pragma" content="no-cache" />

		<title>Dave's Red Smoker</title>

		<link rel="icon" type="image/png" href="favicon_min.png" />
		<link rel="apple-touch-icon" type="image/png" href="BrowserIcon_min.png" />
		<link rel="stylesheet" href="jquery.mobile/1.2.1/jquery.mobile-1.2.1.min.css" />

		<style>/* App custom styles */</style>

		<script src="jquery/1.7.2/jquery.min.js"></script>
		<script src="jquery.mobile/1.2.1/jquery.mobile-1.2.1.min.js"></script>

		<script type="text/javascript">
			jQuery.ajaxSetup({
			// Disable caching of AJAX responses
			cache: false
			});
		</script>

		<script src="dygraph-combined.js"></script>

		<script type="text/javascript">
			function initialize(){
				g2 = new Dygraph(document.getElementById("graphdiv2"),"temperatures.csv",{colors: ["red","blue","orange","green"]});
			}
		</script>
	</head>
	<body onload="initialize();">
		<!-- Home -->
		<div data-role="page" id="page1" style="width:100%; height:100%;">
			<div data-theme="a" data-role="header" style="width:100%; height:10%;">
				<h3>
					Dave's Red Smoker          v0.1.1
				</h3>
			</div>
			<div data-role="content" style="width:100%; height:65%;">
				<div align=right style="width:95%; height:5%;">
					Download data file
					<a href="temperatures.csv">
						temperatures.csv
					</a>
				</div>
				<div id="graphdiv2" style="width:95%; height:100;"></div>
				<div id="stats" style="width:95%; height:20;">
					<h1>
						<span>Temp:
							<font color="red">
								<span id="temperature"></span>
								<script>
									$('#temperature').load('/cgi-bin/controller','get temperature');
									setInterval(function(){
										$('#temperature').load('/cgi-bin/controller','get temperature');
									}, 1500);
								</script>
							</font>
						</span>
						<span>
							&emsp; SP:
							<font color="blue">
								<span id="setpoint"></span>
								<script>
									$('#setpoint').load('/cgi-bin/controller','get setpoint');
									setInterval(function(){
										$('#setpoint').load('/cgi-bin/controller','get setpoint');
									}, 1500);
								</script>
							</font>
						</span>
						<span>
							&emsp; INT:
							<font color="orange">
								<span id="internal"></span>
								<script>
									$('#internal').load('/cgi-bin/controller','get internal');
									setInterval(function(){
										$('#internal').load('/cgi-bin/controller','get internal');
									}, 1500);
								</script>
							</font>
						</span>
						<span>
							&emsp; OP:
							<font color="green">
								<span id="output"></span>
								<script>
									$('#output').load('/cgi-bin/controller','get output');
									setInterval(function(){
										$('#output').load('/cgi-bin/controller','get output');
									}, 1500);
								</script>
							</font>
						</span>
						<span>
							<a id="refreshgraph" data-role="button">Refresh Graph</a>
							<script>
								$("#refreshgraph").click(function() {
									$.mobile.loading( 'show', { theme: "b", text: "Loading......", textonly: true });
									///g2.destroy();
									///initialize();
									g2.annotations();
									$.mobile.loading( 'hide' );
								});
							</script>
						</span>
					</h1>
				</div>
			</div>
			<div data-theme="a" data-role="footer" style="width:100%; height:25%;">
				<div data-role="collapsible-set">
					<div data-role="collapsible" data-collapsed="true">
						<h3>
							Setpoint
						</h3>
						<div data-role="fieldcontain">
							<fieldset data-role="controlgroup">
								<label for="set_setpoint" class="ui-hidden-accessible">
									Setpoint:
								</label>
								<input name="" id="set_setpoint" placeholder="Setpoint:" value="" type="text">
								<script>$("#set_setpoint").live("change" , function() {
										$.get("/cgi-bin/controller", ("set setpoint," + $("#set_setpoint").val()));
									});
								</script>
							</fieldset>
						</div>
					</div>
				</div>
				<div data-role="collapsible-set">
					<div data-role="collapsible" data-collapsed="true">
						<h3>
							PID
						</h3>
						<div class="ui-grid-a">
							<div class="ui-block-a">
								<div data-role="fieldcontain">
									<fieldset data-role="controlgroup">
										<label for="set_prop" class="ui-hidden-accessible">
											Prop:
										</label>
										<input name="" id="set_prop" placeholder="Prop:" value="" type="text">
										<script>$("#set_prop").live("change" , function() {
												$.get("/cgi-bin/controller", "set prop," + $("#set_prop").val());
											});
										</script>
									</fieldset>
								</div>
							</div>
							<div class="ui-block-b">
							</div>
							<div class="ui-block-a">
								<div data-role="fieldcontain">
									<fieldset data-role="controlgroup">
										<label for="set_inter" class="ui-hidden-accessible">
											Inter:
										</label>
										<input name="" id="set_inter" placeholder="Inter:" value="" type="text">
										<script>$("#set_inter").live("change" , function() {
												$.get("/cgi-bin/controller", "set inter," + $("#set_inter").val());
											});
										</script>
									</fieldset>
								</div>
							</div>
							<div class="ui-block-b">
								<a data-role="button" id="savepid">Save to File</a>
									<script>$("#savepid").live("click" , function() {
											$.get("/cgi-bin/controller", "set savePID," + "true");
										});
									</script>
							</div>
							<div class="ui-block-a">
								<div data-role="fieldcontain">
									<fieldset data-role="controlgroup">
										<label for="set_derv" class="ui-hidden-accessible">
											Derv:
										</label>
										<input name="" id="set_derv" placeholder="Derv:" value="" type="text">
										<script>$("#set_derv").live("change" , function() {
												$.get("/cgi-bin/controller", "set derv," + $("#set_derv").val());
											});
										</script>
									</fieldset>
								</div>
							</div>
							<div class="ui-block-b">
							</div>
						</div>
					</div>
				</div>
				<div data-role="collapsible-set">
					<div data-role="collapsible" data-collapsed="true">
						<h3>
							Graph Settings
						</h3>
						<div class="ui-grid-a">
							<div class="ui-block-a">
								<div data-role="fieldcontain">
									<fieldset data-role="controlgroup">
										<label for="graphtimebase" class="ui-hidden-accessible">
											Record Timebase:
										</label>
										<input name="" id="graphtimebase" placeholder="Graph Timebase:" value="" type="text">
										<script>$("#graphtimebase").live("change" , function() {
												$.get("/cgi-bin/controller", "set graphtimebase," + $("#graphtimebase").val());
											});
										</script>
									</fieldset>
								</div>
							</div>
							<div class="ui-block-b">
								<a id="resetdata" data-role="button">Reset Data File</a>
								<script>$("#resetdata").click(function() {
										$.get("/cgi-bin/controller", "set resetdata," + "true");
										g2.destroy();
										initialize();
									});
								</script>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
